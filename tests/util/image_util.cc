#include <gtest/gtest.h>

#include <util/image_util.h>
#include "../util.h"

/* Used GIMP to see RGB values of column seven in data/mnist_png/training/0/1.png. */
TEST(DecodePNG, RGB)
{
    const vector<vector<double>> EXPECTED = {
        { 0x00, 0x00, 0x00 }, /* 0 */
        { 0x00, 0x00, 0x00 },
        { 0x00, 0x00, 0x00 },
        { 0x00, 0x00, 0x00 },
        { 0x00, 0x00, 0x00 },
        { 0x00, 0x00, 0x00 }, /* 5 */
        { 0x00, 0x00, 0x00 },
        { 0x00, 0x00, 0x00 },
        { 0x00, 0x00, 0x00 },
        { 0x00, 0x00, 0x00 },
        { 0x00, 0x00, 0x00 }, /* 10 */
        { 0x00, 0x00, 0x00 },
        { 0x07, 0x07, 0x07 },
        { 0x39, 0x39, 0x39 },
        { 0xC6, 0xC6, 0xC6 },
        { 0xF6, 0xF6, 0xF6 }, /* 15 */
        { 0xFC, 0xFC, 0xFC },
        { 0xFC, 0xFC, 0xFC },
        { 0xFC, 0xFC, 0xFC },
        { 0xFD, 0xFD, 0xFD },
        { 0xFC, 0xFC, 0xFC }, /* 20 */
        { 0xFC, 0xFC, 0xFC },
        { 0xC7, 0xC7, 0xC7 },
        { 0x19, 0x19, 0x19 },
        { 0x00, 0x00, 0x00 },
        { 0x00, 0x00, 0x00 }, /* 25 */
        { 0x00, 0x00, 0x00 },
        { 0x00, 0x00, 0x00 }
    };
    
    ASSERT_EQ(decode_rgb_png("tests/data/1.png")[7], EXPECTED);
}
